<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CallBacks</title>
</head>

<body>
  <script>
    /*
      CALLBACKS: 
    JS es un lenguaje que trata a las funciones como first class. Esto signifca que las funciones se puede pasar como arguemntos a otras funciones, retornarlas como resultado de una funcion, y gaurdarlas en variables u otras estructuras de datos.
    
    Cuando pasamos una funcion como argumento a otra funcion, esa funcion recibe el nombre de callback.

       
    */

    // Ejemplo:

    function decirHolaAlUsuario(usuario) {
      return "Hola " + usuario + "!";
    }

    function decirAdiosAlUsuario(usuario) {
      return "Adios " + usuario + "!";
    }

    function crearSaludo(usuario, cb) {  // le paso un callback q por convencion se pone cb. El cb recibe como parametro una funcion
      // console.log(typeof cb); // Le puedo agregar esto para ver q tipo es cb, y la consola te dice function
      return cb(usuario);  // retorna el callback invocado con el parametro de usuario
    }

    console.log(decirHolaAlUsuario("Dan")); // aca invoco la primer funcion
    console.log(decirAdiosAlUsuario("Dan")); // aca invoco la segunda funcion
    console.log(crearSaludo("Dan", decirHolaAlUsuario)); // "Hola Dan!"  . Aca invoque la tercer funcion pasandole como callback la primera funcion. No la tengo q invocar con () pq sino no me tira la funcion sino lo q retorna la funcion
    console.log(crearSaludo("Dan", decirAdiosAlUsuario)); // "Adios Dan!". Aca invoque la tercer funcion pasandole como callback la segunda

    // console.log(crearSaludo("Dan", decirAdiosAlUsuario())); // asi no la puedo invocar pq me tira q cb no es una funcion. Pq aca estoy invocando la funcion entonces me retorna = return "Adios " + usuario + "!"; que no es una funcion

    // Otro ejemplo:

    function saludar(parametro) {
      return "Hola" + parametro;
    }

    function crearSaludo2(usuario, cb) {   // pongo cb por "callback", pero se puede poner cualquier cosa
      return cb(usuario);
    }
    console.log(crearSaludo2("toni ", saludar));
    // la funcion de crearSaludo2 es el equivalente  a lo siguiente>

    crearSaludo2("Toni", function saludar(parametro) {
      return "Hola " + parametro;
    })

    // Otro ejemplo:
    function sumar(valor) {
      return valor + 2;
    }

    function sumarYmultiplicar(valor, cb) {
      return cb(valor);
    }

    console.log(sumarYmultiplicar(5, sumar));


    // Callbacks con arreglos y prototipos

    /*
    FOREACH: 
    ejecuta la funcion indicada una vez por cada elemento del array
    array.forEach(element => {
    });
  
      Recibe tres parametros el callback de foreach: currentvalue (el elemento actul siendo procesado), index (que indice del arreglo esta en el momento) y array (todo el arreglo)

      foreach tomo una callback como su unico argumento, e itera sobre cada elemento de la matriz y llama al callback en el. El callback puede tomar dos argumentos, el primero es el elemento en si, el segundo es el indice del elemento (este argumento es opcional)
    */

    let alumnos = ["mati", "fede", "leo", "tincho", "emi", "juan"];

    //Sin callbacks:
    for (let i = 0; i < alumnos.length; i++) {
      console.log(alumnos[i]);
    }

    // Con callbacks:
    // El foreach aca invoca la funcion de console.log(elemento) por cada elemento que hay en alumnos. Esto en lugar de ponerle lo siguiente: let i = 0; i < alumnos.length; i++
    alumnos.forEach(function (elemento, indice) {  //esta funcion es el callback q recibe dos parametros. El indice es opcional
      console.log(elemento);
    })
    // Este tipo de funcion es declarativa pq aca no le decimos q hacer, simplemente sabemos q hace la funcion foreach




  </script>
</body>

</html>